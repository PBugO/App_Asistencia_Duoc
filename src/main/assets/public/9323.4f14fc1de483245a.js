"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9323],{9323:(x,M,l)=>{l.r(M),l.d(M,{InicioPage:()=>F});var g=l(6814),u=l(95),t=l(3582);class h{constructor(){this.bloqueInicio=0,this.bloqueTermino=0,this.dia="",this.horaFin="",this.horaInicio="",this.idAsignatura="",this.nombreAsignatura="",this.nombreProfesor="",this.seccion="",this.sede=""}setAsistencia(c,a,n,i,s,r,b,C,O,w){this.bloqueInicio=c,this.bloqueTermino=a,this.dia=n,this.horaFin=i,this.horaInicio=s,this.idAsignatura=r,this.nombreAsignatura=b,this.nombreProfesor=C,this.seccion=O,this.sede=w}obtenerAsistenciaDesdeQR(c){return this.verificarAsistenciaDesdeQR(c)?JSON.parse(c):new h}verificarAsistenciaDesdeQR(c){if(""!==c)try{if(void 0!==JSON.parse(c).bloqueInicio)return!0}catch{}return!1}}var e=l(6689),_=l(9022);function A(o,c){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const a=e.oxw();e.xp6(1),e.hij(" ",a.asistencia.bloqueInicio," ")}}function P(o,c){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const a=e.oxw();e.xp6(1),e.hij(" ",a.asistencia.bloqueTermino," ")}}let q=(()=>{var o;class c{constructor(n){this.bd=n,this.asistencia=new h,this.bd.datosQR.subscribe(i=>{this.asistencia=(new h).obtenerAsistenciaDesdeQR(i)})}ionViewWillEnter(){this.asistencia=new h}}return(o=c).\u0275fac=function(n){return new(n||o)(e.Y36(_.T))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-miclase"]],standalone:!0,features:[e.jDz],decls:52,vars:10,consts:[[1,"marco"],["fixed",""],["size","6",1,"borde-celda"],[4,"ngIf"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"ion-grid",1)(2,"ion-row")(3,"ion-col",2),e._uU(4,"Bloque de inicio"),e.qZA(),e.TgZ(5,"ion-col",2),e.YNc(6,A,2,1,"span",3),e.qZA()(),e.TgZ(7,"ion-row")(8,"ion-col",2),e._uU(9,"Bloque de t\xe9rmino"),e.qZA(),e.TgZ(10,"ion-col",2),e.YNc(11,P,2,1,"span",3),e.qZA()(),e.TgZ(12,"ion-row")(13,"ion-col",2),e._uU(14,"D\xeda"),e.qZA(),e.TgZ(15,"ion-col",2),e._uU(16),e.qZA()(),e.TgZ(17,"ion-row")(18,"ion-col",2),e._uU(19,"Hora de inicio"),e.qZA(),e.TgZ(20,"ion-col",2),e._uU(21),e.qZA()(),e.TgZ(22,"ion-row")(23,"ion-col",2),e._uU(24,"Hora de t\xe9rmino"),e.qZA(),e.TgZ(25,"ion-col",2),e._uU(26),e.qZA()(),e.TgZ(27,"ion-row")(28,"ion-col",2),e._uU(29,"Sigla de asignatura"),e.qZA(),e.TgZ(30,"ion-col",2),e._uU(31),e.qZA()(),e.TgZ(32,"ion-row")(33,"ion-col",2),e._uU(34,"Nombre de asignatura"),e.qZA(),e.TgZ(35,"ion-col",2),e._uU(36),e.qZA()(),e.TgZ(37,"ion-row")(38,"ion-col",2),e._uU(39,"Nombre del profesor"),e.qZA(),e.TgZ(40,"ion-col",2),e._uU(41),e.qZA()(),e.TgZ(42,"ion-row")(43,"ion-col",2),e._uU(44,"Secci\xf3n"),e.qZA(),e.TgZ(45,"ion-col",2),e._uU(46),e.qZA()(),e.TgZ(47,"ion-row")(48,"ion-col",2),e._uU(49,"Sede"),e.qZA(),e.TgZ(50,"ion-col",2),e._uU(51),e.qZA()()()()),2&n&&(e.xp6(6),e.Q6J("ngIf",i.asistencia.bloqueInicio>0),e.xp6(5),e.Q6J("ngIf",i.asistencia.bloqueTermino>0),e.xp6(5),e.Oqu(i.asistencia.dia),e.xp6(5),e.Oqu(i.asistencia.horaInicio),e.xp6(5),e.Oqu(i.asistencia.horaFin),e.xp6(5),e.Oqu(i.asistencia.idAsignatura),e.xp6(5),e.Oqu(i.asistencia.nombreAsignatura),e.xp6(5),e.Oqu(i.asistencia.nombreProfesor),e.xp6(5),e.Oqu(i.asistencia.seccion),e.xp6(5),e.Oqu(i.asistencia.sede))},dependencies:[t.Pc,t.wI,t.jY,t.Nd,g.ez,g.O5,u.u5],styles:[".marco[_ngcontent-%COMP%]{padding:16px}.borde-celda[_ngcontent-%COMP%]{border:1px solid gray;padding:8px;text-align:left}"]}),c})();var m=l(5861),f=l(9862),T=l(6626),d=l(4497),Z=l(2333),v=l(1236);const U=["topOfPage"];function J(o,c){if(1&o){const a=e.EpF();e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"h4"),e._uU(3),e._UZ(4,"br"),e._uU(5),e.qZA()(),e.TgZ(6,"ion-card-content"),e._uU(7),e.qZA(),e.TgZ(8,"div",11)(9,"ion-button",7),e.NdJ("click",function(){const s=e.CHM(a).$implicit,r=e.oxw();return e.KtG(r.editarPublicacion(s))}),e._UZ(10,"ion-icon",12),e.qZA(),e.TgZ(11,"ion-button",7),e.NdJ("click",function(){const s=e.CHM(a).$implicit,r=e.oxw();return e.KtG(r.eliminarPublicacion(s))}),e._UZ(12,"ion-icon",13),e.qZA()()()}if(2&o){const a=c.$implicit;e.xp6(3),e.AsE(" #",a.id,": ",a.titulo," "),e.xp6(2),e.AsE(" Autor: ",a.nombre," ",a.apellido," "),e.xp6(2),e.hij(" ",a.contenido," ")}}let y=(()=>{var o;class c{constructor(n,i){this.authService=n,this.api=i,this.usuario=new T.b,this.publicacion={id:"",correo:"",nombre:"",apellido:"",titulo:"",contenido:""}}ngOnInit(){var n=this;return(0,m.Z)(function*(){const i=yield n.authService.leerUsuarioAutenticado();n.usuario=i,n.limpiarPublicacion()})()}setPublicacion(n,i,s,r,b,C){this.publicacion.id=n,this.publicacion.correo=i,this.publicacion.nombre=s,this.publicacion.apellido=r,this.publicacion.titulo=b,this.publicacion.contenido=C}limpiarPublicacion(){this.setPublicacion("","","","","",""),this.leerPublicaciones()}guardarPublicacion(){""!==this.publicacion.titulo.trim()?""!==this.publicacion.contenido.trim()?""===this.publicacion.id?this.crearPublicacion():this.actualizarPublicacion():(0,d.HG)("Antes de hacer una publicaci\xf3n debe llenar el contenido."):(0,d.HG)("Antes de hacer una publicaci\xf3n debe llenar el t\xedtulo.")}editarPublicacion(n){n.correo===this.usuario.correo?(this.setPublicacion(n.id,n.correo,n.nombre,n.apellido,n.titulo,n.contenido),this.topOfPage.nativeElement.scrollIntoView({block:"end",behavior:"smooth"})):(0,d.HG)("S\xf3lo puede editar las publicaciones a su nombre")}mensajePublicacion(n,i){(0,d.HG)(`La publicaci\xf3n ${i} fue ${n} correctamente`),this.limpiarPublicacion()}crearPublicacion(){this.publicacion.id="",this.publicacion.correo=this.usuario.correo,this.publicacion.nombre=this.usuario.nombre,this.publicacion.apellido=this.usuario.apellido,this.api.createPublicacion(this.publicacion).subscribe({next:n=>this.mensajePublicacion("creada",n.id),error:n=>(0,d.FZ)("No fue posible crear la publicaci\xf3n.",n)})}leerPublicaciones(){this.api.getPublicaciones().subscribe(n=>{n.reverse(),this.publicaciones=n})}actualizarPublicacion(){this.api.updatePublicacion(this.publicacion).subscribe({next:n=>this.mensajePublicacion("actualizada",n.id),error:n=>(0,d.FZ)("No fue posible actualizar la publicaci\xf3n.",n)})}eliminarPublicacion(n){n.correo===this.usuario.correo?this.api.deletePublicacion(n.id).subscribe({next:i=>this.mensajePublicacion("eliminada",n.id),error:i=>(0,d.FZ)("No fue posible aliminar la publicaci\xf3n.",i)}):(0,d.HG)("S\xf3lo puede eliminar las publicaciones a su nombre")}}return(o=c).\u0275fac=function(n){return new(n||o)(e.Y36(Z.e),e.Y36(v.u))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-foro"]],viewQuery:function(n,i){if(1&n&&e.Gf(U,5),2&n){let s;e.iGM(s=e.CRH())&&(i.topOfPage=s.first)}},standalone:!0,features:[e._Bn([f.eN,f.JF]),e.jDz],decls:20,vars:4,consts:[[3,"fullscreen"],["href","#topOfPage"],["topOfPage",""],[1,"ion-padding-horizontal"],["label","T\xedtulo","labelPlacement","floating",3,"ngModel","ngModelChange"],["label","Contenido","labelPlacement","floating",3,"ngModel","ngModelChange"],[1,"alinear-centro"],[3,"click"],[1,"sin-bordes"],[1,"con-padding-top"],[4,"ngFor","ngForOf"],[1,"alinear-derecha"],["slot","icon-only","name","pencil-outline"],["slot","icon-only","name","trash-outline"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-content",0),e._UZ(1,"a",1,2),e.TgZ(3,"ion-card")(4,"ion-card-header")(5,"ion-card-title"),e._uU(6,"Ingresa tu publicaci\xf3n"),e.qZA()(),e.TgZ(7,"ion-item",3)(8,"ion-input",4),e.NdJ("ngModelChange",function(r){return i.publicacion.titulo=r}),e.qZA()(),e.TgZ(9,"ion-item",3)(10,"ion-textarea",5),e.NdJ("ngModelChange",function(r){return i.publicacion.contenido=r}),e.qZA()(),e.TgZ(11,"div",6)(12,"ion-button",7),e.NdJ("click",function(){return i.limpiarPublicacion()}),e._uU(13,"Limpiar"),e.qZA(),e.TgZ(14,"ion-button",7),e.NdJ("click",function(){return i.guardarPublicacion()}),e._uU(15,"Guardar"),e.qZA()()(),e.TgZ(16,"ion-card",8)(17,"ion-card-title",9),e._uU(18,"Publicaciones recientes"),e.qZA()(),e.YNc(19,J,13,5,"ion-card",10),e.qZA()),2&n&&(e.Q6J("fullscreen",!0),e.xp6(8),e.Q6J("ngModel",i.publicacion.titulo),e.xp6(2),e.Q6J("ngModel",i.publicacion.contenido),e.xp6(9),e.Q6J("ngForOf",i.publicaciones))},dependencies:[t.Pc,t.YG,t.PM,t.FN,t.Zi,t.Dq,t.W2,t.gu,t.pK,t.Ie,t.g2,t.j9,g.ez,g.sg,u.u5,u.JJ,u.On,f.JF],styles:[".alinear-centro[_ngcontent-%COMP%]{text-align:center;padding-top:8px;padding-bottom:8px}.alinear-derecha[_ngcontent-%COMP%]{text-align:right}"]}),c})(),N=(()=>{var o;class c{constructor(n,i){this.authService=n,this.bd=i,this.usuario=new T.b,this.repeticionPassword=""}ngOnInit(){var n=this;return(0,m.Z)(function*(){n.authService.usuarioAutenticado.subscribe(i=>{null!==i&&(n.usuario=i,n.repeticionPassword=i.password)})})()}mostrarMensaje(n,i){return""!==i.trim()||((0,d.HG)(`Debe ingresar un valor para el campo "${n}".`),!1)}actualizarPerfil(){let n=this.mostrarMensaje("nombre",this.usuario.nombre);if(n&&(n=this.mostrarMensaje("apellidos",this.usuario.apellido),n&&(n=this.mostrarMensaje("correo",this.usuario.correo),n&&(n=this.mostrarMensaje("pregunta secreta",this.usuario.preguntaSecreta),n&&(n=this.mostrarMensaje("respuesta secreta",this.usuario.respuestaSecreta),n&&(n=this.mostrarMensaje("contrase\xf1a",this.usuario.password),n)))))){if(this.usuario.password!==this.repeticionPassword)return void(0,d.HG)("Las contrase\xf1as escritas deben ser iguales.");this.bd.guardarUsuario(this.usuario),this.authService.setUsuarioAutenticado(this.usuario),(0,d.HG)("Sus datos fueron actualizados")}}}return(o=c).\u0275fac=function(n){return new(n||o)(e.Y36(Z.e),e.Y36(_.T))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-misdatos"]],standalone:!0,features:[e.jDz],decls:26,vars:7,consts:[[1,"marco"],["type","text","label","Nombre","labelPlacement","floating",3,"ngModel","ngModelChange"],["name","person-outline","slot","start"],["type","text","label","Apellidos","labelPlacement","floating",3,"ngModel","ngModelChange"],["type","text","label","Correo","labelPlacement","floating",3,"ngModel","ngModelChange"],["name","mail-outline","slot","start"],["type","text","label","Pregunta secreta","labelPlacement","floating",3,"ngModel","ngModelChange"],["name","key-outline","slot","start"],["type","text","label","Respuesta secreta","labelPlacement","floating",3,"ngModel","ngModelChange"],["type","password","label","Contrase\xf1a","labelPlacement","floating",3,"ngModel","ngModelChange"],["type","password","label","Repetir contrase\xf1a","labelPlacement","floating",3,"ngModel","ngModelChange"],[1,"centrar-boton"],[3,"click"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"ion-item")(2,"ion-input",1),e.NdJ("ngModelChange",function(r){return i.usuario.nombre=r}),e.qZA(),e._UZ(3,"ion-icon",2),e.qZA(),e.TgZ(4,"ion-item")(5,"ion-input",3),e.NdJ("ngModelChange",function(r){return i.usuario.apellido=r}),e.qZA(),e._UZ(6,"ion-icon",2),e.qZA(),e.TgZ(7,"ion-item")(8,"ion-input",4),e.NdJ("ngModelChange",function(r){return i.usuario.correo=r}),e.qZA(),e._UZ(9,"ion-icon",5),e.qZA(),e.TgZ(10,"ion-item")(11,"ion-input",6),e.NdJ("ngModelChange",function(r){return i.usuario.preguntaSecreta=r}),e.qZA(),e._UZ(12,"ion-icon",7),e.qZA(),e.TgZ(13,"ion-item")(14,"ion-input",8),e.NdJ("ngModelChange",function(r){return i.usuario.respuestaSecreta=r}),e.qZA(),e._UZ(15,"ion-icon",7),e.qZA(),e.TgZ(16,"ion-item")(17,"ion-input",9),e.NdJ("ngModelChange",function(r){return i.usuario.password=r}),e.qZA(),e._UZ(18,"ion-icon",7),e.qZA(),e.TgZ(19,"ion-item")(20,"ion-input",10),e.NdJ("ngModelChange",function(r){return i.repeticionPassword=r}),e.qZA(),e._UZ(21,"ion-icon",7),e.qZA(),e._UZ(22,"br"),e.TgZ(23,"div",11)(24,"ion-button",12),e.NdJ("click",function(){return i.actualizarPerfil()}),e._uU(25," Actualizar mis datos "),e.qZA()()()),2&n&&(e.xp6(2),e.Q6J("ngModel",i.usuario.nombre),e.xp6(3),e.Q6J("ngModel",i.usuario.apellido),e.xp6(3),e.Q6J("ngModel",i.usuario.correo),e.xp6(3),e.Q6J("ngModel",i.usuario.preguntaSecreta),e.xp6(3),e.Q6J("ngModel",i.usuario.respuestaSecreta),e.xp6(3),e.Q6J("ngModel",i.usuario.password),e.xp6(3),e.Q6J("ngModel",i.repeticionPassword))},dependencies:[t.Pc,t.YG,t.gu,t.pK,t.Ie,t.j9,g.ez,u.u5,u.JJ,u.On],styles:[".marco[_ngcontent-%COMP%]{padding:16px}.centrar-boton[_ngcontent-%COMP%]{text-align:center}"]}),c})();var p=l(2893),S=l(4414);let Q=(()=>{var o;class c{constructor(n){this.modalCtrl=n,this.isSupported=!1,this.isPermissionGranted=!1}ngOnInit(){var n=this;return(0,m.Z)(function*(){p.mR.isSupported().then(i=>{n.isSupported=i.supported}),p.mR.checkPermissions().then(i=>{n.isPermissionGranted="granted"===i.camera})})()}startScan(){return(0,m.Z)(function*(){var n;null===(n=document.querySelector("body"))||void 0===n||n.classList.add("barcode-scanner-active"),yield p.mR.addListener("barcodeScanned",function(){var r=(0,m.Z)(function*(b){console.log(b.barcode)});return function(b){return r.apply(this,arguments)}}()),yield p.mR.startScan({formats:[p.wK.QrCode]}),yield p.mR.scan({formats:[p.wK.QrCode]})})()}stopScan(){return(0,m.Z)(function*(){var n;null===(n=document.querySelector("body"))||void 0===n||n.classList.remove("barcode-scanner-active"),yield p.mR.removeAllListeners(),yield p.mR.stopScan()})()}}return(o=c).\u0275fac=function(n){return new(n||o)(e.Y36(S.IN))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-qr-nativo"]],standalone:!0,features:[e.jDz],decls:5,vars:2,consts:[["expand","block",3,"disabled","click"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-content")(1,"ion-button",0),e.NdJ("click",function(){return i.startScan()}),e._uU(2,"Comenzar escaneo"),e.qZA(),e.TgZ(3,"ion-button",0),e.NdJ("click",function(){return i.stopScan()}),e._uU(4,"Detener escaneo"),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("disabled",!i.isSupported),e.xp6(2),e.Q6J("disabled",!i.isSupported))},dependencies:[t.Pc,t.YG,t.W2,g.ez,u.u5],styles:[".barcode-scanner-active[_ngcontent-%COMP%]{visibility:hidden;--background: transparent;--ion-background-color: transparent}.barcode-scanner-modal[_ngcontent-%COMP%]{visibility:visible}@media (prefers-color-scheme: dark){.barcode-scanner-modal[_ngcontent-%COMP%]{--background: transparent;--ion-background-color: transparent}}"]}),c})(),F=(()=>{var o;class c{constructor(n,i){this.authService=n,this.bd=i,this.componente_actual="qr"}ionViewWillEnter(){this.componente_actual="qr",this.bd.datosQR.next("")}cambiarComponente(n){this.componente_actual=n}cerrarSesion(){this.authService.logout()}}return(o=c).\u0275fac=function(n){return new(n||o)(e.Y36(Z.e),e.Y36(_.T))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-inicio"]],standalone:!0,features:[e.jDz],decls:27,vars:6,consts:[[3,"translucent"],[3,"ngModel","ngModelChange"],["value","qr",3,"qrCapturado"],["value","miclase"],["value","foro"],["value","misdatos"],[3,"hidden"],["expand","block","fill","clear","shape","round",3,"click"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Asistencia DUOC - Inicio"),e.qZA()(),e.TgZ(4,"ion-toolbar")(5,"ion-segment",1),e.NdJ("ngModelChange",function(r){return i.componente_actual=r}),e.TgZ(6,"ion-segment-button",2),e.NdJ("qrCapturado",function(){return i.cambiarComponente("miclase")}),e.TgZ(7,"ion-label"),e._uU(8,"QR"),e.qZA()(),e.TgZ(9,"ion-segment-button",3)(10,"ion-label"),e._uU(11,"Mi clase"),e.qZA()(),e.TgZ(12,"ion-segment-button",4)(13,"ion-label"),e._uU(14,"Foro"),e.qZA()(),e.TgZ(15,"ion-segment-button",5)(16,"ion-label"),e._uU(17,"Mis datos"),e.qZA()()()()(),e.TgZ(18,"ion-content"),e._UZ(19,"app-qr-nativo",6)(20,"app-miclase",6)(21,"app-foro",6)(22,"app-misdatos",6),e.qZA(),e.TgZ(23,"ion-footer")(24,"ion-toolbar")(25,"ion-button",7),e.NdJ("click",function(){return i.cerrarSesion()}),e._uU(26," Cerrar sesi\xf3n "),e.qZA()()()),2&n&&(e.Q6J("translucent",!0),e.xp6(5),e.Q6J("ngModel",i.componente_actual),e.xp6(14),e.Q6J("hidden","qr"!==i.componente_actual),e.xp6(1),e.Q6J("hidden","miclase"!==i.componente_actual),e.xp6(1),e.Q6J("hidden","foro"!==i.componente_actual),e.xp6(1),e.Q6J("hidden","misdatos"!==i.componente_actual))},dependencies:[t.Pc,t.YG,t.W2,t.fr,t.Gu,t.Q$,t.cJ,t.GO,t.wd,t.sr,t.QI,g.ez,u.u5,u.JJ,u.On,Q,q,y,N]}),c})()}}]);